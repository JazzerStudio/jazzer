.method static declared-synchronized getSecondaryClassLoader(Landroid/content/Context;)Ljava/lang/ClassLoader;
    .registers 13
    .param p0, "context"  # Landroid/content/Context;
    .annotation system Ldalvik/annotation/Throws;
        value = {
            Ljava/lang/Exception;
        }
    .end annotation

    const-class v0, Lcom/applisto/appcloner/classes/Utils;

    monitor-enter v0

    .line 561
    :try_start_3
    sget-object v1, Lcom/applisto/appcloner/classes/Utils;->secondaryClassLoader:Ljava/lang/ClassLoader;

    if-nez v1, :cond_fe

    .line 563
    invoke-virtual {p0}, Landroid/content/Context;->getCacheDir()Ljava/io/File;

    move-result-object v1

    .line 564
    .local v1, "cacheDir":Ljava/io/File;
    const-string v2, "natives_sec_blob"

    const-string v3, ".dex"

    invoke-static {v2, v3, v1}, Ljava/io/File;->createTempFile(Ljava/lang/String;Ljava/lang/String;Ljava/io/File;)Ljava/io/File;

    move-result-object v2
    :try_end_13
    .catchall {:try_start_3 .. :try_end_13} :catchall_102

    .line 567
    .local v2, "tempFile":Ljava/io/File;
    :try_start_13
    new-instance v3, Ljava/io/FileOutputStream;

    invoke-direct {v3, v2}, Ljava/io/FileOutputStream;-><init>(Ljava/io/File;)V
    :try_end_18
    .catchall {:try_start_13 .. :try_end_18} :catchall_f9

    .line 570
    .local v3, "out":Ljava/io/FileOutputStream;
    const/4 v4, 0x0

    .line 575
    .local v4, "in":Ljava/io/InputStream;
    const/4 v5, 0x0

    :try_start_1a
    invoke-static {}, Lcom/applisto/appcloner/classes/Utils;->isDevDevice()Z

    move-result v6

    if-eqz v6, :cond_92

    .line 576
    invoke-virtual {p0}, Landroid/content/Context;->getPackageManager()Landroid/content/pm/PackageManager;

    move-result-object v6

    new-instance v7, Ljava/lang/String;

    const-string v8, "Y29tLmFwcGxpc3RvLmFwcGNsb25lci5jbGFzc2VzLnNlY29uZGFyeQ=="

    .line 577
    invoke-static {v8, v5}, Landroid/util/Base64;->decode(Ljava/lang/String;I)[B

    move-result-object v8

    invoke-direct {v7, v8}, Ljava/lang/String;-><init>([B)V

    const/16 v8, 0x40

    .line 576
    invoke-virtual {v6, v7, v8}, Landroid/content/pm/PackageManager;->getPackageInfo(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;

    move-result-object v6

    .line 579
    .local v6, "pi":Landroid/content/pm/PackageInfo;
    iget-object v7, v6, Landroid/content/pm/PackageInfo;->signatures:[Landroid/content/pm/Signature;

    aget-object v7, v7, v5

    invoke-virtual {v7}, Landroid/content/pm/Signature;->toByteArray()[B

    move-result-object v7

    invoke-static {v7}, Ljavax/security/cert/X509Certificate;->getInstance([B)Ljavax/security/cert/X509Certificate;

    move-result-object v7

    invoke-virtual {v7}, Ljavax/security/cert/X509Certificate;->getPublicKey()Ljava/security/PublicKey;

    move-result-object v7

    invoke-virtual {v7}, Ljava/lang/Object;->hashCode()I

    move-result v7

    const v8, 0xa789abf

    if-ne v7, v8, :cond_92

    .line 580
    new-instance v7, Ljava/util/zip/ZipFile;

    iget-object v8, v6, Landroid/content/pm/PackageInfo;->applicationInfo:Landroid/content/pm/ApplicationInfo;

    iget-object v8, v8, Landroid/content/pm/ApplicationInfo;->publicSourceDir:Ljava/lang/String;

    invoke-direct {v7, v8}, Ljava/util/zip/ZipFile;-><init>(Ljava/lang/String;)V

    .line 581
    .local v7, "zf":Ljava/util/zip/ZipFile;
    new-instance v8, Ljava/io/ByteArrayOutputStream;

    invoke-direct {v8}, Ljava/io/ByteArrayOutputStream;-><init>()V

    .line 582
    .local v8, "baos":Ljava/io/ByteArrayOutputStream;
    const-string v9, "classes.dex"

    invoke-virtual {v7, v9}, Ljava/util/zip/ZipFile;->getEntry(Ljava/lang/String;)Ljava/util/zip/ZipEntry;

    move-result-object v9

    invoke-virtual {v7, v9}, Ljava/util/zip/ZipFile;->getInputStream(Ljava/util/zip/ZipEntry;)Ljava/io/InputStream;

    move-result-object v9

    invoke-static {v9, v8}, Lcom/applisto/appcloner/classes/Utils;->copy(Ljava/io/InputStream;Ljava/io/OutputStream;)V

    .line 583
    new-instance v9, Ljava/io/ByteArrayInputStream;

    new-instance v10, Lcom/applisto/appcloner/classes/util/SimpleCrypt;

    const-string v11, "veXR89fv5n8vdJRVbc8hNsrpJsNQfGyZ"

    invoke-direct {v10, v11}, Lcom/applisto/appcloner/classes/util/SimpleCrypt;-><init>(Ljava/lang/String;)V

    .line 584
    invoke-virtual {v8}, Ljava/io/ByteArrayOutputStream;->toByteArray()[B

    move-result-object v11

    invoke-virtual {v10, v11}, Lcom/applisto/appcloner/classes/util/SimpleCrypt;->encrypt([B)[B

    move-result-object v10

    invoke-direct {v9, v10}, Ljava/io/ByteArrayInputStream;-><init>([B)V

    move-object v4, v9

    .line 585
    invoke-virtual {v7}, Ljava/util/zip/ZipFile;->close()V

    .line 586
    sget-object v9, Lcom/applisto/appcloner/classes/Utils;->TAG:Ljava/lang/String;

    const-string v10, "WARNING: Loaded non-bundled secondary classes for testing"

    invoke-static {v9, v10}, Landroid/util/Log;->w(Ljava/lang/String;Ljava/lang/String;)I

    .line 587
    const-string v9, "WARNING: Loaded non-bundled secondary classes for testing"

    const/4 v10, 0x1

    invoke-static {p0, v9, v10}, Landroid/widget/Toast;->makeText(Landroid/content/Context;Ljava/lang/CharSequence;I)Landroid/widget/Toast;

    move-result-object v9

    .line 588
    invoke-virtual {v9}, Landroid/widget/Toast;->show()V
    :try_end_92
    .catch Ljava/lang/Exception; {:try_start_1a .. :try_end_92} :catch_95
    .catchall {:try_start_1a .. :try_end_92} :catchall_93

    .line 592
    .end local v6  # "pi":Landroid/content/pm/PackageInfo;
    .end local v7  # "zf":Ljava/util/zip/ZipFile;
    .end local v8  # "baos":Ljava/io/ByteArrayOutputStream;
    :cond_92
    goto :goto_96

    .line 607
    .end local v4  # "in":Ljava/io/InputStream;
    :catchall_93
    move-exception v4

    goto :goto_f4

    .line 591
    .restart local v4  # "in":Ljava/io/InputStream;
    :catch_95
    move-exception v6

    .line 594
    :goto_96
    if-nez v4, :cond_a3

    .line 595
    :try_start_98
    invoke-virtual {p0}, Landroid/content/Context;->getAssets()Landroid/content/res/AssetManager;

    move-result-object v6

    const-string v7, "natives_sec_blob.html"

    invoke-virtual {v6, v7}, Landroid/content/res/AssetManager;->open(Ljava/lang/String;)Ljava/io/InputStream;

    move-result-object v6
    :try_end_a2
    .catchall {:try_start_98 .. :try_end_a2} :catchall_93

    move-object v4, v6

    .line 598
    :cond_a3
    :try_start_a3
    new-instance v6, Ljava/io/ByteArrayOutputStream;

    invoke-direct {v6}, Ljava/io/ByteArrayOutputStream;-><init>()V

    .line 599
    .local v6, "baos":Ljava/io/ByteArrayOutputStream;
    invoke-static {v4, v6}, Lcom/applisto/appcloner/classes/Utils;->copy(Ljava/io/InputStream;Ljava/io/OutputStream;)V

    .line 600
    new-instance v7, Ljava/io/ByteArrayInputStream;

    new-instance v8, Lcom/applisto/appcloner/classes/util/SimpleCrypt;

    const-string v9, "veXR89fv5n8vdJRVbc8hNsrpJsNQfGyZ"

    invoke-direct {v8, v9}, Lcom/applisto/appcloner/classes/util/SimpleCrypt;-><init>(Ljava/lang/String;)V

    .line 602
    invoke-virtual {v6}, Ljava/io/ByteArrayOutputStream;->toByteArray()[B

    move-result-object v9

    invoke-virtual {v8, v9}, Lcom/applisto/appcloner/classes/util/SimpleCrypt;->decrypt([B)[B

    move-result-object v8

    invoke-direct {v7, v8}, Ljava/io/ByteArrayInputStream;-><init>([B)V

    .line 600
    invoke-static {v7, v3}, Lcom/applisto/appcloner/classes/Utils;->copy(Ljava/io/InputStream;Ljava/io/OutputStream;)V
    :try_end_c2
    .catchall {:try_start_a3 .. :try_end_c2} :catchall_ee

    .line 604
    .end local v6  # "baos":Ljava/io/ByteArrayOutputStream;
    :try_start_c2
    invoke-virtual {v4}, Ljava/io/InputStream;->close()V
    :try_end_c5
    .catchall {:try_start_c2 .. :try_end_c5} :catchall_93

    .line 605
    nop

    .line 607
    .end local v4  # "in":Ljava/io/InputStream;
    :try_start_c6
    invoke-virtual {v3}, Ljava/io/FileOutputStream;->close()V

    .line 608
    nop

    .line 610
    const-string v4, "opt"

    invoke-virtual {p0, v4, v5}, Landroid/content/Context;->getDir(Ljava/lang/String;I)Ljava/io/File;

    move-result-object v4

    .line 611
    .local v4, "optimizedDirectory":Ljava/io/File;
    invoke-static {v4}, Lcom/applisto/appcloner/classes/Utils;->deleteDirectory(Ljava/io/File;)Z

    .line 612
    invoke-virtual {v4}, Ljava/io/File;->mkdirs()Z

    .line 613
    new-instance v5, Ldalvik/system/DexClassLoader;

    invoke-virtual {v2}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v6

    .line 614
    invoke-virtual {v4}, Ljava/io/File;->getAbsolutePath()Ljava/lang/String;

    move-result-object v7

    const/4 v8, 0x0

    invoke-virtual {p0}, Landroid/content/Context;->getClassLoader()Ljava/lang/ClassLoader;

    move-result-object v9

    invoke-direct {v5, v6, v7, v8, v9}, Ldalvik/system/DexClassLoader;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/ClassLoader;)V

    sput-object v5, Lcom/applisto/appcloner/classes/Utils;->secondaryClassLoader:Ljava/lang/ClassLoader;
    :try_end_ea
    .catchall {:try_start_c6 .. :try_end_ea} :catchall_f9

    .line 617
    .end local v3  # "out":Ljava/io/FileOutputStream;
    .end local v4  # "optimizedDirectory":Ljava/io/File;
    :try_start_ea
    invoke-virtual {v2}, Ljava/io/File;->delete()Z
    :try_end_ed
    .catchall {:try_start_ea .. :try_end_ed} :catchall_102

    .line 618
    goto :goto_fe

    .line 604
    .restart local v3  # "out":Ljava/io/FileOutputStream;
    .local v4, "in":Ljava/io/InputStream;
    :catchall_ee
    move-exception v5

    :try_start_ef
    invoke-virtual {v4}, Ljava/io/InputStream;->close()V

    .line 605
    nop

    .end local v1  # "cacheDir":Ljava/io/File;
    .end local v2  # "tempFile":Ljava/io/File;
    .end local v3  # "out":Ljava/io/FileOutputStream;
    .end local p0  # "context":Landroid/content/Context;
    throw v5
    :try_end_f4
    .catchall {:try_start_ef .. :try_end_f4} :catchall_93

    .line 607
    .end local v4  # "in":Ljava/io/InputStream;
    .restart local v1  # "cacheDir":Ljava/io/File;
    .restart local v2  # "tempFile":Ljava/io/File;
    .restart local v3  # "out":Ljava/io/FileOutputStream;
    .restart local p0  # "context":Landroid/content/Context;
    :goto_f4
    :try_start_f4
    invoke-virtual {v3}, Ljava/io/FileOutputStream;->close()V

    .line 608
    nop

    .end local v1  # "cacheDir":Ljava/io/File;
    .end local v2  # "tempFile":Ljava/io/File;
    .end local p0  # "context":Landroid/content/Context;
    throw v4
    :try_end_f9
    .catchall {:try_start_f4 .. :try_end_f9} :catchall_f9

    .line 617
    .end local v3  # "out":Ljava/io/FileOutputStream;
    .restart local v1  # "cacheDir":Ljava/io/File;
    .restart local v2  # "tempFile":Ljava/io/File;
    .restart local p0  # "context":Landroid/content/Context;
    :catchall_f9
    move-exception v3

    :try_start_fa
    invoke-virtual {v2}, Ljava/io/File;->delete()Z

    .line 618
    throw v3

    .line 621
    .end local v1  # "cacheDir":Ljava/io/File;
    .end local v2  # "tempFile":Ljava/io/File;
    :cond_fe
    :goto_fe
    sget-object v1, Lcom/applisto/appcloner/classes/Utils;->secondaryClassLoader:Ljava/lang/ClassLoader;
    :try_end_100
    .catchall {:try_start_fa .. :try_end_100} :catchall_102

    monitor-exit v0

    return-object v1

    .line 560
    .end local p0  # "context":Landroid/content/Context;
    :catchall_102
    move-exception p0

    monitor-exit v0

    throw p0
.end method
